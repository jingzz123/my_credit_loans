<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="cn.creditloans.core.dao.EnterpriseTypeDao">

	<resultMap id="enterpriseTypeResultMap" type="cn.creditloans.core.entity.enterprise.EnterpriseType">
        <id property="id" column="id" />
        <result property="name" column="name"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>
	
	<select id="selectEnterpriseTypeList" resultMap="enterpriseTypeResultMap">
		select id, name, create_time, update_time from enterprise_type
		order by create_time desc limit #{pm.startCount}, #{pm.pageSize}
	</select>
	
	<select id="selectEnterpriseTypeById" resultMap="enterpriseTypeResultMap" parameterType="int">
		select id, name, create_time, update_time from enterprise_type where id=#{id}
	</select>
	
	<insert id="insertEnterpriseType" parameterType="cn.creditloans.core.entity.enterprise.EnterpriseType">
		<selectKey order="AFTER" keyProperty="id" resultType="java.lang.Integer">
			SELECT currval('enterprise_type_id_seq')
		</selectKey>
	
 		insert into enterprise_type (name, create_time, update_time)
 					values (#{name}, now(),now())
	</insert>
	
	<update id="updateEnterpriseType"  parameterType="cn.creditloans.core.entity.enterprise.EnterpriseType">
		update enterprise_type set name=#{name} ,update_time=now() where id = #{id}
	</update>
	
    <delete id="deleteEnterpriseTypeById" parameterType="int">
    	delete from enterprise_type where id = #{id} 
    </delete>
    
	<select id="selectEnterpriseTypePageCount" resultType="int" >
		select count(1) from enterprise_type where 1=1  
	</select>
	
	<select id="selectEnterpriseName" resultType="int" parameterType="string">
		select count(1) from enterprise_type where name = #{name}  
	</select>
	
	<select id="selectEnterpriseType" resultType="int" parameterType="int">
		select count(1) from enterprise_type as e ,enterprise as en where e.id = #{id} and e.id  = en.type_id
	</select>
		
	<select id="selectTypeList" resultMap="enterpriseTypeResultMap" >
		select id, name from enterprise_type where 1=1
	</select>
</mapper>