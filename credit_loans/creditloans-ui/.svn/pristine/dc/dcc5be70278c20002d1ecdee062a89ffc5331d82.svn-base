package cn.creditloans.ui.controllers;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
@RequestMapping(value = "")
public class LoginController {
	
	@RequestMapping(value="/login", method = {RequestMethod.GET, RequestMethod.POST})
	public String login() {
		return "/login";
	}
	
	@RequestMapping(value="/doLogin", method = {RequestMethod.GET, RequestMethod.POST})
	public String doLogin(@RequestParam(required=false) String emailAddress, 
			@RequestParam(required=false) String password,String validateCode, HttpServletRequest request, HttpServletResponse response,HttpSession session, Model model) {
		
		if(emailAddress.equals("admin@sina.com") && password.equals("111111")){
			return "redirect:/p2p/grjbxx/showList";
		}else{
			model.addAttribute("errorMsg", "用户名或密码错误");
			model.addAttribute("isHaveErr", true);
			return "/login";
		}
	}
	
	@RequestMapping(value="/logout", method = {RequestMethod.GET, RequestMethod.POST})
	public String logout(HttpServletRequest request, HttpServletResponse response) {
		return "redirect:/login";
	}
	@RequestMapping(value="/notFount", method = {RequestMethod.GET, RequestMethod.POST})
	public String notFount(){
		return "/not_fount";
	}
}
