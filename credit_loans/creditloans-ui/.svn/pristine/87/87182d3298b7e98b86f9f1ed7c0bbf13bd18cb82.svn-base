<%@ page language="java" contentType="text/html; charset=utf-8"  pageEncoding="utf-8"%>
<%@ include  file="./../../common/header.jsp"%> 
<script type="text/javascript">

$().ready(function() {
	$("#driverInfoForm").validate({
	    onkeyup: false,
		rules: {
			name:{
				required:true,
				rangelength:[2,4],
				isContainsSpecialChar:true
			},
			age:{
				required:true,
				isIntGtZero:true,
				range:[16,80]
			},
			jobNo:{
				required:true,
				rangelength:[1,16]
			},
			phone1:{
				required:true,
				isPhone: true
			},
			phone2:{
				isPhone: true
			},
			remark:{
				required: true,
				rangelength:[2,64]
			}
		},
		messages:{
			name:{
				required:"请输入驾驶员姓名",
				rangelength:"驾驶员姓名应大于2个汉字小于4个汉字",
				isChinese:"请填写正确的驾驶员姓名中文名称"
			},
			age:{
				required:"请输入驾驶员年龄",
				isIntGtZero:"请输入正确的年龄",
				range:"驾驶员年龄应在16岁至80岁之间"
			},
			jobNo:{
				required:"请输入驾驶员工号",
				rangelength:"驾驶员工号长度应为1~16个字符"
			},
			phone1:{
				required:"请输入驾驶员电话号码",
				isPhone: "请输入正确的座机或手机号码"
			},
			phone1:{
				isPhone: "请输入正确的座机或手机号码"
			},
			remark:{
				required: "请输入驾驶员备注信息",
				rangelength:"备注信息长度应为2~64个字符"
			}
		},
		errorPlacement: function(error, element) {
			error.appendTo(element.parent().siblings("span"));
		},
		submitHandler:function(){
			var driverInfoJson = $('#driverInfoForm').serializeObject();
			
			jQuery.ajax({
				type: "post",
			    url: "${pageContext.request.contextPath}/ev/driver/doAdd",
			    contentType: "application/json",
			    data: JSON.stringify(driverInfoJson),
			    success: function (driverId) {
			    	if(driverId>0){
				        alert("添加驾驶员成功！");
			    	}else{
			    		alert("添加驾驶员失败！");
			    		
			    	}
			    	window.location.href = "${pageContext.request.contextPath}/ev/driver/showList";
			    },
			    error: function () {
			        alert("save driver error");
			    }	
			});
		}
	});

});

function goback(){
	window.location.href = "${pageContext.request.contextPath}/ev/driver/showList";
}
</script>
	<!-- 二级菜单 begin -->
		<div class="sidebar" id="sidebar">
			<div class="sidebar-shortcuts" id="sidebar-shortcuts">
				<div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
					<div class="icon-text"> <i class="icon-truck"></i> <span> 车辆管理 </span></div>
				</div>
			</div>
			<!-- #sidebar-shortcuts -->
			<ul class="nav nav-list">
				<li> <a href="${pageContext.request.contextPath}/ev/manufacturer/showList"> <i class="icon-home"></i> <span class="menu-text">生产厂家 </span> </a> </li>
				<li> <a href="${pageContext.request.contextPath}/notFount"> <i class="icon-flag"></i> <span class="menu-text">车队信息 </span> </a> </li>
				<li class="active"> <a href="${pageContext.request.contextPath}/ev/driver/showList"> <i class="icon-user"></i> <span class="menu-text">驾驶员信息 </span> </a> </li>
				<li> <a href="${pageContext.request.contextPath}/enterprise/bus/stop/busStopList"> <i class="icon-map-marker"></i> <span class="menu-text">公交站点管理</span> </a> </li>
				<li> <a href="${pageContext.request.contextPath}/enterprise/bus/line/busLineList"> <i class="icon-road"></i> <span class="menu-text">公交线路管理</span> </a> </li>
				<li> <a href="${pageContext.request.contextPath}/ev/vehicle/showList"> <i class="icon-truck"></i> <span class="menu-text">车辆信息 </span> </a> </li>
			</ul>
			<!-- /.nav-list -->
			<div class="sidebar-collapse" id="sidebar-collapse"> <i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i> </div>
		</div>
		<!-- 二级菜单 end -->
	<div class="main-content">
		<div class="breadcrumbs" id="breadcrumbs">
			<ul class="breadcrumb">
				<li><i class="icon-home home-icon"></i> <a href="#">首页</a></li>
				<li><a href="#">车辆管理</a></li>
				<li class="active">驾驶员信息</li>
			</ul>
			<!-- .breadcrumb -->
		</div>
		
		<div class="page-content">
			<div class="page-header">
				<h1>
					驾驶员信息<small> <i class="icon-double-angle-right"></i>
						添加驾驶员信息
					</small>
				</h1>
			</div><!-- /.page-header -->
			
			<div class="row">
				<div class="col-xs-12">
			    	<div class="col-md-12">
				    	<form id="driverInfoForm" class="form-horizontal" >
							  <div class="form-group">
							    <label for="name" class="col-sm-4 control-label">驾驶员姓名</label>
							    <div class="col-sm-3">
							      <input type="text" id="name" name="name" class="form-control" placeholder="输入驾驶员姓名" >
							    </div>
							    <span id="error_name" style="color: red"></span>
							  </div>
							  <div class="form-group">
							    <label for="age" class="col-sm-4 control-label">年龄</label>
							    <div class="col-sm-3">
							      <input type="text" id="age" name="age" class="form-control" placeholder="输入年龄">
							    </div>
							    <span id="error_age" style="color: red"></span>
							  </div>
							  <div class="form-group">
							    <label for="jobNo" class="col-sm-4 control-label">工号</label>
							    <div class="col-sm-3">
							      <input type="text" id="jobNo" name="jobNo" class="form-control" placeholder="输入工号">
							    </div>
							    <span id="error_jobNo" style="color: red"></span>
							  </div>
							  <div class="form-group">
							    <label for="phone1" class="col-sm-4 control-label">电话号码1</label>
							    <div class="col-sm-3">
							      <input type="text" id="phone1" name="phone1" class="form-control" placeholder="输入电话号码1">
							    </div>
							    <span id="error_phone1" style="color: red"></span>
							  </div>
							  <div class="form-group">
							    <label for="phone2" class="col-sm-4 control-label">电话号码2</label>
							    <div class="col-sm-3">
							      <input type="text" id="phone2" name="phone2" class="form-control" placeholder="输入电话号码2">
							    </div>
							    <span id="error_phone2" style="color: red"></span>
							  </div>
							  <div class="form-group">
							    <label for="remark" class="col-sm-4 control-label">备注</label>
							    <div class="col-sm-3">
							      <input type="text" id="remark" name="remark" class="form-control" placeholder="输入备注">
							    </div>
							    <span id="error_remark" style="color: red"></span>
							  </div>
							  
							  <div class="form-group">
							    <div class="col-sm-offset-4">
							      <input type="submit" class="btn btn-primary" value="保存"></input>
							      <input type="button" class="btn btn-success" value="返回" onclick="goback()"></input>
							    </div>
							  </div>
						</form>
					</div>
				</div>
				 
			</div> <!-- class:row -->
			
		</div><!-- /.page-content -->
		
	</div><!-- /.main-content --> 
<%@ include  file="./../../common/footer.jsp"%>